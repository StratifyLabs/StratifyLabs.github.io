---
layout: page
title: Stratify OS Docs
page_source: Doxygen
---
{% include JB/setup %}
<script type="text/javascript" src="doxy-boot.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Stratify OS</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><b>Stratify OS</b> includes two main APIs for users: the <a class="el" href="group___s_t_d_c.html">C Standard Library</a> and the <a class="el" href="group___p_o_s_i_x.html">POSIX</a> API. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsos__board__config__t.html">sos_board_config_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stratify Board Configuration Structure.  <a href="structsos__board__config__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___s_t_d_c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_d_c.html">C Standard Library</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___i_f_a_c_e___d_e_v"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_f_a_c_e___d_e_v.html">Device Interface</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___l_i_n_k___l_a_y_e_r"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_n_k___l_a_y_e_r.html">Link Transport Layer (for remote access to system)</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___p_o_s_i_x"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___p_o_s_i_x.html">POSIX</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae65665332278b3b47ba519a1aba0222b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#gae65665332278b3b47ba519a1aba0222b">hibernate</a> (int seconds)</td></tr>
<tr class="separator:gae65665332278b3b47ba519a1aba0222b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac149b46cea60ad2b3538a075d91ffacb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#gac149b46cea60ad2b3538a075d91ffacb">powerdown</a> (int seconds)</td></tr>
<tr class="separator:gac149b46cea60ad2b3538a075d91ffacb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46e6c06dae5493d81b29faaf3b810b48"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#ga46e6c06dae5493d81b29faaf3b810b48">sos_default_thread</a> (void *arg)</td></tr>
<tr class="separator:ga46e6c06dae5493d81b29faaf3b810b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga822cdf991a028966eb7656caefacae21"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#ga822cdf991a028966eb7656caefacae21">mkfs</a> (const char *path)</td></tr>
<tr class="separator:ga822cdf991a028966eb7656caefacae21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03c0afc4d1b734bd2edfc7e5937b716a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#ga03c0afc4d1b734bd2edfc7e5937b716a">mount</a> (const char *path)</td></tr>
<tr class="separator:ga03c0afc4d1b734bd2edfc7e5937b716a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedcfb39a22d2dddb718d1d4e188f52de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#gaedcfb39a22d2dddb718d1d4e188f52de">unmount</a> (const char *path)</td></tr>
<tr class="separator:gaedcfb39a22d2dddb718d1d4e188f52de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29682c0cfb61366952a1311c4d298403"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#ga29682c0cfb61366952a1311c4d298403">launch</a> (const char *path, char *exec_path, const char *args, int options, int ram_size, int(*update_progress)(int, int), char *const envp[])</td></tr>
<tr class="separator:ga29682c0cfb61366952a1311c4d298403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42949a4d3e3bfee94d74f8ac7dc8bb15"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#ga42949a4d3e3bfee94d74f8ac7dc8bb15">install</a> (const char *path, char *name, int options, int ram_size, int(*update_progress)(int, int))</td></tr>
<tr class="memdesc:ga42949a4d3e3bfee94d74f8ac7dc8bb15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Install an application.  <a href="#ga42949a4d3e3bfee94d74f8ac7dc8bb15">More...</a><br /></td></tr>
<tr class="separator:ga42949a4d3e3bfee94d74f8ac7dc8bb15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace57c1587a1b9898b868e269d8a0e2ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_f_y.html#gace57c1587a1b9898b868e269d8a0e2ba">kernel_request</a> (int request, void *data) 1</td></tr>
<tr class="memdesc:gace57c1587a1b9898b868e269d8a0e2ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be implemented by user. Default returns zero.  <a href="#gace57c1587a1b9898b868e269d8a0e2ba">More...</a><br /></td></tr>
<tr class="separator:gace57c1587a1b9898b868e269d8a0e2ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae65665332278b3b47ba519a1aba0222b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hibernate </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function puts the controller in hibernate mode. All CPU and peripheral activity is stopped. The RTC continues running and will wake up the controller after <em>seconds</em> has elapsed. When the controller wakes up, it resumes execution in the same state as before <em><a class="el" href="group___s_t_f_y.html#gae65665332278b3b47ba519a1aba0222b">hibernate()</a></em> was called.</p>
<p>Hibernate corresponds to <em>CORE_SLEEP_DEEPSLEEP</em>. It can be woken up before <em>seconds</em> elapsed if other interrupts are enabled such as pin change interrupts. See the device specific documentation for wakeup events for <em>CORE_SLEEP_DEEPSLEEP</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seconds</td><td>Number of seconds to hibernate (zero to hibernate indefinitely) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga42949a4d3e3bfee94d74f8ac7dc8bb15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int install </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ram_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(int, int)&#160;</td>
          <td class="paramname"><em>update_progress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function installs an application in flash or RAM </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The source path </td></tr>
    <tr><td class="paramname">exec_path</td><td>A destination buffer for the path to execute once installed </td></tr>
    <tr><td class="paramname">options</td><td>Install options </td></tr>
    <tr><td class="paramname">ram_size</td><td>The number of bytes to use for heap/stack </td></tr>
    <tr><td class="paramname">update_progress</td><td>Callback to show progress of the install </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

</div>
</div>
<a class="anchor" id="gace57c1587a1b9898b868e269d8a0e2ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kernel_request </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Request to execute </td></tr>
    <tr><td class="paramname">data</td><td>Single argument to the request </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns result of request operation </dd></dl>

</div>
</div>
<a class="anchor" id="ga29682c0cfb61366952a1311c4d298403"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int launch </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>exec_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ram_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(int, int)&#160;</td>
          <td class="paramname"><em>update_progress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *const&#160;</td>
          <td class="paramname"><em>envp</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Launch an application from a data file system.</p>
<p>The options are:</p><ul>
<li>APPFS_FLAG_IS_REPLACE</li>
<li>APPFS_FLAG_IS_FLASH</li>
<li>APPFS_FLAG_IS_STARTUP (only with APPFS_FLAG_IS_FLASH)</li>
<li>APPFS_FLAG_IS_REPLACE</li>
<li>APPFS_FLAG_IS_ORPHAN</li>
</ul>
<p>Here is an example of launching a new application: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#include &lt;caos.h&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;pid_t p;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;int status;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;char exec_path[PATH_MAX];</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;p = launch(&quot;/home/HelloWorld&quot;, exec_path, 0, APPFS_FLAG_IS_FLASH, 0, 0, 0);</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;wait(&amp;status); //wait until hello world is done running</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;unlink(exec_path); //delete the installed image (or just leave it there to run again)</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to launch binary </td></tr>
    <tr><td class="paramname">exec_path</td><td>The path to store the path where the binary is installed (e.g. /app/flash/0-HelloWorld) </td></tr>
    <tr><td class="paramname">args</td><td>Pointer to the arguments for launch </td></tr>
    <tr><td class="paramname">options</td><td>Install options mask (flash, startup, etc) </td></tr>
    <tr><td class="paramname">ram_size</td><td>The amount of RAM that will be allocated to stack/heap (excludes code even if running from RAM), set to zero for default RAM size </td></tr>
    <tr><td class="paramname">update_progress</td><td>Callback to show progress of install/launch </td></tr>
    <tr><td class="paramname">envp</td><td>Null for this version </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

</div>
</div>
<a class="anchor" id="ga822cdf991a028966eb7656caefacae21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mkfs </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Format the filesystem that is mounted at <em>path</em>. </p><dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

</div>
</div>
<a class="anchor" id="ga03c0afc4d1b734bd2edfc7e5937b716a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mount the filesystem specified at <em>path</em> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to the filesystem (specified at build time) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

</div>
</div>
<a class="anchor" id="gac149b46cea60ad2b3538a075d91ffacb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void powerdown </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function turns the controller off. The RTC stays on and wakes up the controller after <em>seconds</em> has elapsed. When the controller wakes up from power down, it resets.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seconds</td><td>Number of seconds to powerdown (zero to powedown indefinitely) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga46e6c06dae5493d81b29faaf3b810b48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* sos_default_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is weakly bound to code that initializes each filesystem and starts any processes that are designed to auto-run. It can be completely replaced so that users can customize the startup sequence. </p>

</div>
</div>
<a class="anchor" id="gaedcfb39a22d2dddb718d1d4e188f52de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unmount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unmount the filesystem specified at <em>path</em> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to the filesystem (specified at build time) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

</div>
</div>
</div><!-- contents -->
<div style="background: #fff;">
	<div class="container">
		{% include themes/twitter/signup.html %}
	</div>
</div>