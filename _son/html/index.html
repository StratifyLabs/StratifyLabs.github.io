---
layout: page
title: Stratify OS Docs
---
{% include JB/setup %}
<script type="text/javascript" src="doxy-boot.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Stratify Object Notation Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction </h2>
<p>Stratify Object Notation (SON) is an object storage file format similar to JSON but optimized for use on systems with limited resources (e.g. microcontrollers).</p>
<p>The following JSON data can easily be created in SON format.</p>
<div class="fragment"><div class="line">{</div><div class="line">     <span class="stringliteral">&quot;float0&quot;</span>: 0.5,</div><div class="line">     <span class="stringliteral">&quot;str0&quot;</span>: <span class="stringliteral">&quot;Hello World&quot;</span>,</div><div class="line">     <span class="stringliteral">&quot;object0&quot;</span> : { <span class="stringliteral">&quot;number&quot;</span>: 1 },</div><div class="line">     <span class="stringliteral">&quot;array0&quot;</span> : [</div><div class="line">          <span class="stringliteral">&quot;unsigned0&quot;</span>: 10,</div><div class="line">          <span class="stringliteral">&quot;unsigned1&quot;</span>: 50</div><div class="line">     ]</div><div class="line">     <span class="stringliteral">&quot;bool0&quot;</span>: <span class="keyword">true</span>,</div><div class="line">     <span class="stringliteral">&quot;bool1&quot;</span>: <span class="keyword">false</span></div><div class="line">}</div></div><!-- fragment --><p>Here is the code to create the above data in SON format.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="son_8h.html">son.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> create_data_file(){</div><div class="line"> <span class="comment">//the stack size needs to exceed the depth</span></div><div class="line"> <span class="comment">//of the data (depth in the example above is 2)</span></div><div class="line">     <a class="code" href="structson__stack__t.html">son_stack_t</a> stack[4];</div><div class="line">     <a class="code" href="structson__t.html">son_t</a> h;</div><div class="line">     <a class="code" href="group___f_i_l_e_s.html#ga699ec52045b7a22744c99107d26d8122">son_create</a>(&amp;h, <span class="stringliteral">&quot;/home/data.son&quot;</span>, stack, 4);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#gae96f2c99a8480d89ca75c02cf58ec366">son_open_obj</a>(&amp;h, <span class="stringliteral">&quot;&quot;</span>); <span class="comment">//create the root object</span></div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#ga60ecf27dabccf9533f49702f9c1cd26f">son_write_float</a>(&amp;h, <span class="stringliteral">&quot;float0&quot;</span>, 0.5);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#ga8f72ec385aab6af9d845ff2d3c02cfe4">son_write_str</a>(&amp;h, <span class="stringliteral">&quot;str0&quot;</span>, <span class="stringliteral">&quot;Hello World&quot;</span>);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#gae96f2c99a8480d89ca75c02cf58ec366">son_open_obj</a>(&amp;h, <span class="stringliteral">&quot;object0&quot;</span>);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#gad51892e03c0fa6c7d64945fb9b99db76">son_write_num</a>(&amp;h, <span class="stringliteral">&quot;number&quot;</span>, 1);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#ga40f733d154834b9eff57159730a461da">son_close_obj</a>(&amp;h);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#gace53b7c83d63b1aaef88177747c7116b">son_open_array</a>(&amp;h, <span class="stringliteral">&quot;array0&quot;</span>);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#gae1a68f04ccf8caf605bc0c04bd1e3711">son_write_unum</a>(&amp;h, <span class="stringliteral">&quot;0&quot;</span>, 10); <span class="comment">//inside arrays -- keys don&#39;t matter</span></div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#gae1a68f04ccf8caf605bc0c04bd1e3711">son_write_unum</a>(&amp;h, <span class="stringliteral">&quot;1&quot;</span>, 50);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#ga18d14d2617752d80d45e491925336e65">son_close_array</a>(&amp;h);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#ga0e6036052e222e8ba6a1a52278809000">son_write_true</a>(&amp;h, <span class="stringliteral">&quot;bool0&quot;</span>);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#ga236c07d7a4a8933fc0a4023d586a772b">son_write_false</a>(&amp;h, <span class="stringliteral">&quot;bool1&quot;</span>);</div><div class="line">     <a class="code" href="group___w_r_i_t_e.html#ga40f733d154834b9eff57159730a461da">son_close_obj</a>(&amp;h); <span class="comment">//close root -- calling this is optional, all objects/arrays will close on son_close()</span></div><div class="line">     <a class="code" href="group___f_i_l_e_s.html#ga1f217dcfa00977986c15b3daae675677">son_close</a>(&amp;h);</div><div class="line">}</div></div><!-- fragment --><p>The data in SON files can be accessed using an access string. Keys are separated by periods and array values are accessed using brackets. The following code shows how to access each value of the above example.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="son_8h.html">son.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> read_values(){</div><div class="line">     <a class="code" href="structson__t.html">son_t</a> h;</div><div class="line">     <a class="code" href="group___f_i_l_e_s.html#ga90e32cf4df5579114312635e3593e24f">son_open</a>(&amp;h, <span class="stringliteral">&quot;/home/data.son&quot;</span>);</div><div class="line">     <span class="keywordtype">float</span> float0 = <a class="code" href="group___r_e_a_d.html#ga6fbfdc3752e6a1432c1fb820017a93f1">son_read_float</a>(&amp;h, <span class="stringliteral">&quot;float0&quot;</span>);</div><div class="line">     <span class="keywordtype">char</span> str0[32];</div><div class="line">     <a class="code" href="group___r_e_a_d.html#gacedd0eec41cb4a1517b05b62c8e812cc">son_read_str</a>(&amp;h, <span class="stringliteral">&quot;str0&quot;</span>, str0, 32);</div><div class="line">     <span class="keywordtype">int</span> number = <a class="code" href="group___r_e_a_d.html#gaf54eaf0d883e16f93db7bfd767794894">son_read_num</a>(&amp;h, <span class="stringliteral">&quot;object0.number&quot;</span>);</div><div class="line">     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> array0_0 = <a class="code" href="group___r_e_a_d.html#gab4472b0a3876dc522a1a351467e85ba8">son_read_unum</a>(&amp;h, <span class="stringliteral">&quot;array0[0]&quot;</span>);</div><div class="line">     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> array0_1 = <a class="code" href="group___r_e_a_d.html#gab4472b0a3876dc522a1a351467e85ba8">son_read_unum</a>(&amp;h, <span class="stringliteral">&quot;array0[1]&quot;</span>);</div><div class="line">     <span class="keywordtype">int</span> bool0 = <a class="code" href="group___r_e_a_d.html#ga8e1f41283ffa5a220ad53ff4ed2b35f4">son_read_bool</a>(&amp;h, <span class="stringliteral">&quot;bool0&quot;</span>);</div><div class="line">     <span class="keywordtype">int</span> bool1 = <a class="code" href="group___r_e_a_d.html#ga8e1f41283ffa5a220ad53ff4ed2b35f4">son_read_bool</a>(&amp;h, <span class="stringliteral">&quot;bool1&quot;</span>);</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
