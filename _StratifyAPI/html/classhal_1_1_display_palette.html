---
layout: page
title: Stratify OS Docs
page_source: Doxygen
---
{% include setup %}
<script type="text/javascript" src="doxy-boot.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehal.html">hal</a></li><li class="navelem"><a class="el" href="classhal_1_1_display_palette.html">DisplayPalette</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">hal::DisplayPalette Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for hal::DisplayPalette:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classhal_1_1_display_palette__inherit__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Documentation</h2>
<div class="textblock"><p>A display palette is used to map bitmap colors to an actual display. The Stratify graphics library supports the following formats.</p>
<ul>
<li>1bpp (1 bit per pixel)</li>
<li>2bpp</li>
<li>4bpp</li>
<li>8bpp</li>
</ul>
<p>This class is used to manage how the graphics pixel formats maps to the display. For example, if the graphics use 4bpp and the display uses RGB565, the palette would have 16 entries that contain RGB565 values and define how a color in the 4bpp format maps to a color on the display. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad92529946e45f1fd21f97cf8b50950c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_display_palette.html#ad92529946e45f1fd21f97cf8b50950c5">alloc_colors</a> (int <a class="el" href="classhal_1_1_display_palette.html#ae437ee10eb838cc9f1ee652a92052ad7">count</a>, int <a class="el" href="classhal_1_1_display_palette.html#afdbeab6cd5353c7f747f50eed6ef3f64">pixel_size</a>)</td></tr>
<tr class="separator:ad92529946e45f1fd21f97cf8b50950c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20edad65182bdd383e8c6c0c4f064575"><td class="memItemLeft" align="right" valign="top">u8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_display_palette.html#a20edad65182bdd383e8c6c0c4f064575">color</a> (u32 v) const </td></tr>
<tr class="separator:a20edad65182bdd383e8c6c0c4f064575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae437ee10eb838cc9f1ee652a92052ad7"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_display_palette.html#ae437ee10eb838cc9f1ee652a92052ad7">count</a> () const </td></tr>
<tr class="separator:ae437ee10eb838cc9f1ee652a92052ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ec5f5c26ecbdd90c9af0e73db2dcb57"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_display_palette.html#a0ec5f5c26ecbdd90c9af0e73db2dcb57">load</a> (const char *path)</td></tr>
<tr class="separator:a0ec5f5c26ecbdd90c9af0e73db2dcb57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae498a8cfa9867f55ca181b91f48a27b4"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_display_palette.html#ae498a8cfa9867f55ca181b91f48a27b4">pixel_format</a> () const </td></tr>
<tr class="separator:ae498a8cfa9867f55ca181b91f48a27b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdbeab6cd5353c7f747f50eed6ef3f64"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_display_palette.html#afdbeab6cd5353c7f747f50eed6ef3f64">pixel_size</a> () const </td></tr>
<tr class="separator:afdbeab6cd5353c7f747f50eed6ef3f64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a185620bab1d5115a862fd2acd2b2bcc7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_display_palette.html#a185620bab1d5115a862fd2acd2b2bcc7">save</a> (const char *path) const </td></tr>
<tr class="separator:a185620bab1d5115a862fd2acd2b2bcc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adba1ad52f0186632a2181f9da95b7efb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_display_palette.html#adba1ad52f0186632a2181f9da95b7efb">set_color</a> (u32 v, u8 r, u8 g, u8 b)</td></tr>
<tr class="separator:adba1ad52f0186632a2181f9da95b7efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classvar_1_1_item"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classvar_1_1_item')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classvar_1_1_item.html">var::Item&lt; display_palette_t &gt;</a></td></tr>
<tr class="memitem:a21b3894e7fb2f99348d5ec9a367bf7b6 inherit pub_methods_classvar_1_1_item"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvar_1_1_item.html#a21b3894e7fb2f99348d5ec9a367bf7b6">Item</a> ()</td></tr>
<tr class="separator:a21b3894e7fb2f99348d5ec9a367bf7b6 inherit pub_methods_classvar_1_1_item"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a9e96e891040f8f4d70a5da763dd251 inherit pub_methods_classvar_1_1_item"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvar_1_1_item.html#a5a9e96e891040f8f4d70a5da763dd251">Item</a> (const <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structdisplay__palette__t.html">display_palette_t</a> &amp;item)</td></tr>
<tr class="separator:a5a9e96e891040f8f4d70a5da763dd251 inherit pub_methods_classvar_1_1_item"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6809bd3f10f359369d61e1a8589a79 inherit pub_methods_classvar_1_1_item"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvar_1_1_item.html#a1b6809bd3f10f359369d61e1a8589a79">Item</a> (const <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structdisplay__palette__t.html">display_palette_t</a> *item)</td></tr>
<tr class="separator:a1b6809bd3f10f359369d61e1a8589a79 inherit pub_methods_classvar_1_1_item"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d6c18f051e0617dd8aee7defc7e691 inherit pub_methods_classvar_1_1_item"><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structdisplay__palette__t.html">display_palette_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvar_1_1_item.html#a39d6c18f051e0617dd8aee7defc7e691">data_const</a> () const</td></tr>
<tr class="separator:a39d6c18f051e0617dd8aee7defc7e691 inherit pub_methods_classvar_1_1_item"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa220dfdc33f010a68d0d5cfe810c817f inherit pub_methods_classvar_1_1_item"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvar_1_1_item.html#aa220dfdc33f010a68d0d5cfe810c817f">operator const display_palette_t &amp;</a> () const</td></tr>
<tr class="separator:aa220dfdc33f010a68d0d5cfe810c817f inherit pub_methods_classvar_1_1_item"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7089da6e80bcf494ea68ad4d7c2b4772 inherit pub_methods_classvar_1_1_item"><td class="memItemLeft" align="right" valign="top">u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvar_1_1_item.html#a7089da6e80bcf494ea68ad4d7c2b4772">size</a> () const</td></tr>
<tr class="separator:a7089da6e80bcf494ea68ad4d7c2b4772 inherit pub_methods_classvar_1_1_item"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbdce461a5c1e86d223a299625250618 inherit pub_methods_classvar_1_1_item"><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structdisplay__palette__t.html">display_palette_t</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvar_1_1_item.html#adbdce461a5c1e86d223a299625250618">value</a> () const</td></tr>
<tr class="separator:adbdce461a5c1e86d223a299625250618 inherit pub_methods_classvar_1_1_item"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classvar_1_1_item_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classvar_1_1_item_object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classvar_1_1_item_object.html">var::ItemObject</a></td></tr>
<tr class="memitem:a1af9fdb5440d980683f61c3919a22bfe inherit pub_methods_classvar_1_1_item_object"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvar_1_1_item_object.html#a1af9fdb5440d980683f61c3919a22bfe">clear</a> ()</td></tr>
<tr class="separator:a1af9fdb5440d980683f61c3919a22bfe inherit pub_methods_classvar_1_1_item_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad92529946e45f1fd21f97cf8b50950c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal::DisplayPalette::alloc_colors </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pixel_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates memory for <em>count</em> colors with <em>pixel_size</em> bytes each.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>The total number of colors </td></tr>
    <tr><td class="paramname">pixel_size</td><td>The number of bytes occupied by each color </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Less than zero if there were an error allocating memory </dd></dl>

</div>
</div>
<a class="anchor" id="a20edad65182bdd383e8c6c0c4f064575"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8* hal::DisplayPalette::color </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a pointer to the color index specified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>The color index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the color </dd></dl>

</div>
</div>
<a class="anchor" id="ae437ee10eb838cc9f1ee652a92052ad7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">u8 hal::DisplayPalette::count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of colors in the palette. </p>

</div>
</div>
<a class="anchor" id="a0ec5f5c26ecbdd90c9af0e73db2dcb57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int hal::DisplayPalette::load </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Loads the item from a file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

<p>Reimplemented from <a class="el" href="classvar_1_1_item_object.html#a8b7bcdfd979d78b36be3795e8c649a63">var::ItemObject</a>.</p>

</div>
</div>
<a class="anchor" id="ae498a8cfa9867f55ca181b91f48a27b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">u8 hal::DisplayPalette::pixel_format </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the pixel format. </p>

</div>
</div>
<a class="anchor" id="afdbeab6cd5353c7f747f50eed6ef3f64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">u8 hal::DisplayPalette::pixel_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of bytes per pixel stored in the palette </p>

</div>
</div>
<a class="anchor" id="a185620bab1d5115a862fd2acd2b2bcc7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int hal::DisplayPalette::save </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Saves the item to a file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

<p>Reimplemented from <a class="el" href="classvar_1_1_item_object.html#a8c86020501bc410c21c8a8600b67434b">var::ItemObject</a>.</p>

</div>
</div>
<a class="anchor" id="adba1ad52f0186632a2181f9da95b7efb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal::DisplayPalette::set_color </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the color.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>The color index </td></tr>
    <tr><td class="paramname">r</td><td>The red component </td></tr>
    <tr><td class="paramname">g</td><td>The green component </td></tr>
    <tr><td class="paramname">b</td><td>The blue component</td></tr>
  </table>
  </dd>
</dl>
<p>The color format is converted based on the value of <a class="el" href="classhal_1_1_display_palette.html#ae498a8cfa9867f55ca181b91f48a27b4">pixel_format()</a>. For example, if <a class="el" href="classhal_1_1_display_palette.html#ae498a8cfa9867f55ca181b91f48a27b4">pixel_format()</a> returns PIXEL_FORMAT_RGB565, the color will be set in the palette to match that format. </p>

</div>
</div>
</div><!-- contents -->
<div style="background: #fff;">
	<div class="container">
		{% include signup.html %}
	</div>
</div>