---
layout: page
title: Stratify OS Docs
page_source: Doxygen
---
{% include JB/setup %}
<script type="text/javascript" src="doxy-boot.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehal.html">hal</a></li><li class="navelem"><a class="el" href="classhal_1_1_device_signal.html">DeviceSignal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">hal::DeviceSignal Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Documentation</h2>
<div class="textblock"><p>This class allows you to configure physical events to trigger signals. For example, a rising edge on a pin can cause the system to send a signal to a thread. Here is an example: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;sapi/sys.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;sapi/hal.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">volatile</span> <span class="keywordtype">bool</span> my_var;</div><div class="line"><span class="keywordtype">void</span> my_handler(<span class="keywordtype">int</span> a){</div><div class="line">     <span class="comment">//this executes on the rising edge of EINT0</span></div><div class="line">     my_var = <span class="keyword">true</span>;</div><div class="line">     <span class="comment">//you shouldn&#39;t use any non re-entrant functions here (such as printf() and malloc())</span></div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]){</div><div class="line">     Eint eint(0);</div><div class="line"></div><div class="line">     DevSignal dev_signal(<span class="keyword">true</span>, Signal::USR1);  <span class="comment">//send SIGUSR1 to this thread on every rising edge</span></div><div class="line">     SignalHandler handler(my_handler);</div><div class="line"></div><div class="line">     eint.init(0);</div><div class="line">     <span class="keyword">event</span>.set_handler(handler);</div><div class="line"></div><div class="line">     <span class="comment">//this configures the hardware to send the signal to this thread (my_handler() will execute)</span></div><div class="line">     <span class="comment">//dev_signal MUST exist as long as this action is set</span></div><div class="line">     eint.set_action( phy_event.action(EINT_ACTION_EVENT_RISING) );</div><div class="line"></div><div class="line">     <span class="keywordflow">while</span>(my_var == <span class="keyword">false</span>){</div><div class="line">          Timer::wait_sec(1);</div><div class="line">     }</div><div class="line"></div><div class="line">     <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a06d732dff66fe4895bbdf8fd46448a03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_device_signal.html#a06d732dff66fe4895bbdf8fd46448a03">DeviceSignal</a> (bool persistent, int <a class="el" href="classsys_1_1_signal.html#a011f499488e8caa5acff9705de45f77e">signo</a>, int sigcode=0, int <a class="el" href="classsys_1_1_signal.html#abbd4f48a59f5fe1a9c1a89602b17654f">sigvalue</a>=0)</td></tr>
<tr class="separator:a06d732dff66fe4895bbdf8fd46448a03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c64a2ca461584ea4289aab37b35195"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_device_signal.html#a20c64a2ca461584ea4289aab37b35195">DeviceSignal</a> (devfs_signal_callback_t context)</td></tr>
<tr class="separator:a20c64a2ca461584ea4289aab37b35195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b18fd11ebe301d77cb80679d08b4042"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structmcu__action__t.html">mcu_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhal_1_1_device_signal.html#a1b18fd11ebe301d77cb80679d08b4042">create_action</a> (int <a class="el" href="classsys_1_1_signal.html#aa242d445b71f895ff7fe344ea4630e75">event</a>, int channel=0)</td></tr>
<tr class="separator:a1b18fd11ebe301d77cb80679d08b4042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsys_1_1_signal"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsys_1_1_signal')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsys_1_1_signal.html">sys::Signal</a></td></tr>
<tr class="memitem:a3df4a1ca3b5ccb0a402a4dc82c399c59 inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#a3df4a1ca3b5ccb0a402a4dc82c399c59">Signal</a> (int <a class="el" href="classsys_1_1_signal.html#a011f499488e8caa5acff9705de45f77e">signo</a>, int <a class="el" href="classsys_1_1_signal.html#abbd4f48a59f5fe1a9c1a89602b17654f">sigvalue</a>=0)</td></tr>
<tr class="separator:a3df4a1ca3b5ccb0a402a4dc82c399c59 inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa242d445b71f895ff7fe344ea4630e75 inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classev_1_1_event.html">ev::Event</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#aa242d445b71f895ff7fe344ea4630e75">event</a> ()</td></tr>
<tr class="separator:aa242d445b71f895ff7fe344ea4630e75 inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc2c0f561b4d80f27e0e9253d1ecb936 inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#acc2c0f561b4d80f27e0e9253d1ecb936">set_handler</a> (const <a class="el" href="classsys_1_1_signal_handler.html">SignalHandler</a> &amp;handler) const </td></tr>
<tr class="separator:acc2c0f561b4d80f27e0e9253d1ecb936 inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011f499488e8caa5acff9705de45f77e inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#a011f499488e8caa5acff9705de45f77e">signo</a> () const </td></tr>
<tr class="separator:a011f499488e8caa5acff9705de45f77e inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5d1bd4cc96ce19205aa0d9b3b2c5b7 inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#acc5d1bd4cc96ce19205aa0d9b3b2c5b7">sigptr</a> () const </td></tr>
<tr class="separator:acc5d1bd4cc96ce19205aa0d9b3b2c5b7 inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbd4f48a59f5fe1a9c1a89602b17654f inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#abbd4f48a59f5fe1a9c1a89602b17654f">sigvalue</a> () const </td></tr>
<tr class="separator:abbd4f48a59f5fe1a9c1a89602b17654f inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a511678286846c5ddfc5db7b3705c047a inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#a511678286846c5ddfc5db7b3705c047a">trigger</a> (pid_t pid) const </td></tr>
<tr class="separator:a511678286846c5ddfc5db7b3705c047a inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c309ade2ac8ba0aaf9a094a96fd036 inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#a31c309ade2ac8ba0aaf9a094a96fd036">trigger</a> (pthread_t t) const </td></tr>
<tr class="separator:a31c309ade2ac8ba0aaf9a094a96fd036 inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7037c3ec851b69a0b1f1d1b82477e64f inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#a7037c3ec851b69a0b1f1d1b82477e64f">trigger</a> () const </td></tr>
<tr class="separator:a7037c3ec851b69a0b1f1d1b82477e64f inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85bdd34eac18240584594d83f83b18ce inherit pub_methods_classsys_1_1_signal"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsys_1_1_signal.html#a85bdd34eac18240584594d83f83b18ce">trigger_value</a> (pid_t pid) const </td></tr>
<tr class="separator:a85bdd34eac18240584594d83f83b18ce inherit pub_methods_classsys_1_1_signal"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classapi_1_1_s_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classapi_1_1_s_object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classapi_1_1_s_object.html">api::SObject</a></td></tr>
<tr class="memitem:a73c80e2a8831814979487f0c384812b7 inherit pub_methods_classapi_1_1_s_object"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapi_1_1_s_object.html#a73c80e2a8831814979487f0c384812b7">api_version</a> () const </td></tr>
<tr class="separator:a73c80e2a8831814979487f0c384812b7 inherit pub_methods_classapi_1_1_s_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3176de72d0c9f9ef5179793ba3c4d48c inherit pub_methods_classapi_1_1_s_object"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapi_1_1_s_object.html#a3176de72d0c9f9ef5179793ba3c4d48c">clear_error</a> () const </td></tr>
<tr class="separator:a3176de72d0c9f9ef5179793ba3c4d48c inherit pub_methods_classapi_1_1_s_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43ce2e9dff53aa19b56b05f9b40724f inherit pub_methods_classapi_1_1_s_object"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapi_1_1_s_object.html#ae43ce2e9dff53aa19b56b05f9b40724f">error_number</a> () const </td></tr>
<tr class="separator:ae43ce2e9dff53aa19b56b05f9b40724f inherit pub_methods_classapi_1_1_s_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classapi_1_1_s_object"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classapi_1_1_s_object')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classapi_1_1_s_object.html">api::SObject</a></td></tr>
<tr class="memitem:a6218149cb92b523d3bf608f4035af8c6 inherit pro_methods_classapi_1_1_s_object"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapi_1_1_s_object.html#a6218149cb92b523d3bf608f4035af8c6">set_error_number</a> (int value) const </td></tr>
<tr class="separator:a6218149cb92b523d3bf608f4035af8c6 inherit pro_methods_classapi_1_1_s_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a06d732dff66fe4895bbdf8fd46448a03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">hal::DeviceSignal::DeviceSignal </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sigcode</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sigvalue</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructs a signal event based on a hardware device action.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">persistent</td><td>If false, the signal will be sent only on the first hardware event </td></tr>
    <tr><td class="paramname">signo</td><td>The signal number </td></tr>
    <tr><td class="paramname">sigcode</td><td>The signal code </td></tr>
    <tr><td class="paramname">sigvalue</td><td>The signal value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a20c64a2ca461584ea4289aab37b35195"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">hal::DeviceSignal::DeviceSignal </td>
          <td>(</td>
          <td class="paramtype">devfs_signal_callback_t&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructs a signal event based on a hardware device action using a signal_callback_t data structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>A copy of the signal_callback_t data to use to handle the event. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a1b18fd11ebe301d77cb80679d08b4042"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structmcu__action__t.html">mcu_action_t</a> hal::DeviceSignal::create_action </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This returns a <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structmcu__action__t.html">mcu_action_t</a> data structure that can be used to set the action associated with a hardware event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>The hardware event </td></tr>
    <tr><td class="paramname">channel</td><td>The hardware channel </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a copy of a <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structmcu__action__t.html">mcu_action_t</a> data structure </dd></dl>

</div>
</div>
</div><!-- contents -->
<div style="background: #fff;">
	<div class="container">
		{% include themes/twitter/signup.html %}
	</div>
</div>