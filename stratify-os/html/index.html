---
layout: page
title: CoActionOS Docs
---
{% include JB/setup %}
<script type="text/javascript" src="doxy-boot.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CoActionOS Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="group___c_a_o_s.html#ga1c6d5de492ac61ad29aec7aa9a436bbf">VERSION</a></p>
<h1><a class="anchor" id="INTRO"></a>
Introduction</h1>
<p>This is the CoActionOS API documentation. This is recommended for users looking to write device drivers or tweak the kernel. If you are writing applications, see the <a href="../../coactionos-applib/html/">CoActionOS Applib API documentation</a>.</p>
<h2><a class="anchor" id="API"></a>
POSIX API</h2>
<p>CoActionOS supports a subset of the <a class="el" href="group___s_t_d_c.html">C Standard Library</a> and <a class="el" href="group___p_o_s_i_x.html">POSIX</a> APIs. Many programmers are already familiar with these APIs which eases the learning curve. Additionally, reference material for these standards is widely available on the web.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group___s_t_d_c.html">C Standard Library</a>, <a class="el" href="group___p_o_s_i_x.html">POSIX</a></dd></dl>
<h2><a class="anchor" id="MULTI"></a>
Multi-tasking</h2>
<p>CoActionOS supports both threads and processes. Threads are programmed using the <a class="el" href="group___p_t_h_r_e_a_d.html">Posix Threads (pthread)</a> API. Processes are unique because CoActionOS does not use a memory management unit (MMU). Instead, it uses a memory protection unit (MPU) to prevent one process from reading or writing data from another process despite both processes running in the same address space. Interprocess communication is accomplished with the <a class="el" href="group___s_e_m_a_p_h_o_r_e.html">Semaphore</a>, <a class="el" href="group___m_q_u_e_u_e.html">Message Queue (mqueue)</a>, and pthread APIs as well as with the filesystem (see <a class="el" href="group___s_y_s___f_i_f_o.html">FIFO Buffer</a>).</p>
<h2><a class="anchor" id="FILESYSTEM"></a>
Filesystem</h2>
<p>CoActionOS supports multiple filesystems. There are three required filesystems and one optional filesystem included in CoActionOS:</p>
<ul>
<li>Root Filesystem</li>
<li>Application Filesystem</li>
<li>Device Filesystem</li>
<li>Flash Filesystem (optional)</li>
</ul>
<p>Other filesystems (such as FAT) can also be added by the user.</p>
<p>Files on CoActionOS are accessed using the <a class="el" href="group___s_t_d_c.html">C Standard Library</a> or <a class="el" href="group___u_n_i_s_t_d.html">Unix Standard (unistd)</a> functions: <a class="el" href="group___u_n_i___f_i_l_e___a_c_c_e_s_s.html#gac843f2e35e60c3bbf1da47d84306f29b">open()</a>, <a class="el" href="group___u_n_i___f_i_l_e___a_c_c_e_s_s.html#gaefe7609d91407014d94611912cc2b1a3">read()</a>, <a class="el" href="group___u_n_i___f_i_l_e___a_c_c_e_s_s.html#gadd30ddeed4bdbf3c96fa36970c1ca778">write()</a>, <a class="el" href="group___u_n_i___f_i_l_e___a_c_c_e_s_s.html#gaacad1d135ca2779b583623678e36db7c">close()</a>, etc. The root filesystem is located at "/" and only supports the <a class="el" href="group___d_i_r_e_n_t.html">Directory Entry (dirent)</a> API. It is used for browsing the child filesystems.</p>
<p>The application filesystem manages data and code stored in the microcontroller's flash memory or RAM. By default, it is located at "/app" and includes the folders "/app/flash" and "/app/ram". It is primarily used to install new programs but may also be used in a limited way for both temporary and non-volatile data storage.</p>
<p>The device filesystem comprises the hardware access API. It is located at "/dev" and allows access to both peripheral microcontroller hardware and external ICs. The folder, per se, is read-only; all available devices are fixed when the kernel is installed. The devices in the folder usually support reading as well as writing and are classified as either character special or block special files.</p>
<p>The flash filesystem ("/home") is a fully-functional data-storage filesystem. It requires an external IC (such as a serial flash chip).</p>
<h1><a class="anchor" id="DESIGN"></a>
Design</h1>
<p>CoActionOS is divided into three layers (from the top down):</p>
<ul>
<li>OS Layer (scheduler, filesystem, etc)</li>
<li>Hardware Device Library (external and system device level abstraction)</li>
<li>Hardware Peripheral Library (MCU level abstraction)</li>
</ul>
<h2><a class="anchor" id="OS_DESIGN"></a>
OS</h2>
<p>The OS layer comprises the C standard library as well as a subset of the POSIX standard including the scheduler, threads, processes, and hardware abstraction.</p>
<h2><a class="anchor" id="HWDL_DESIGN"></a>
Hardware Device Library (HWDL)</h2>
<p>HWDL is the hardware device abstraction layer and includes drivers for a growing collection of ICs. These ICs interface with the microcontroller using any combination of peripherals (SPI, UART, I2C, etc) and GPIO pins. HWDL drivers make direct calls to the HWPL library functions.</p>
<h2><a class="anchor" id="HWPL_DESIGN"></a>
Hardware Peripheral Library (HWPL)</h2>
<p>The HWPL comprises all the drivers to access the on-chip micrcontroller features and peripherals including low-level task management. For example, this layer includes drivers for the on-chip UART and the on-chip clock control. It is the only layer that is dependent on the microcontroller.</p>
<h3><a class="anchor" id="ARCHITECTURES"></a>
Architectures</h3>
<p>HWPL currently supports:</p>
<ul>
<li>ARM Cortex M3 Core: CMSIS, Fault Handling, Memory Protection, SysTick, NVIC, Tasks including Context Switching</li>
<li>NXP LPC17xx: Cortex M3 Core, ADC, DAC (with DMA) Flash Memory, GPIO, USB Device, UART (with DMA), SPI (and SSP), I2C, Timers, RTC, PWM, QEI, WDT; support planned for: CAN; see <a class="el" href="group___l_p_c17_x_x_d_e_v.html">LPC17xx Devices</a>.</li>
<li>USB Link: USB Link technology is a desktop API for accessing MCU peripherals which currently supports peripheral IO operations on devices running CoActionOS; see <a class="el" href="group___u_s_b_l_i_n_k.html">USB Link (link)</a>. </li>
</ul>
</div></div><!-- contents -->
