
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>UART Tutorial</title> 
<meta name="author" content="Stratify Labs, Inc">

<!-- Enable responsive viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Le styles -->
<link href="/assets/themes/twitter/bootstrap3/css/bootstrap.min.css" rel="stylesheet">
<script src="/assets/themes/twitter/bootstrap3/js/jquery-2.0.3.min.js"></script>
<script src="/assets/themes/twitter/bootstrap3/js/bootstrap.min.js"></script>
<link href="/assets/themes/twitter/bootstrap3/css/font-awesome.min.css" rel="stylesheet">
<link href="/assets/themes/twitter/css/style.css" rel="stylesheet">
<link href="/assets/themes/twitter/css/syntax.css" rel="stylesheet">
<script src="/assets/themes/twitter/js/application.js"></script>

<!-- Le fav and touch icons -->
<!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

<!-- atom & rss feed -->
<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
<link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

</head>
<body style="min-height: 200px; padding-top: 50px;">
	<header class="navbar navbar-default navbar-fixed-top bs-docs-nav" role="banner">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="navbar-header">
						<button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".menu-navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="/index.html">
							<img style="height: 22px;" src="/images/StratifyOS-Logo.svg" />
						</a>
					</div>

					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse menu-navbar-collapse" role="navigation">
						<ul class="nav navbar-nav">
							<li><a href="https://github.com/StratifyLabs"><i class="fa fa-code-fork"></i> Code</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<a class="anchor" id="top"></a>


	<div class="content" id="content">
		


<div class="container">
	<div class="row" style="margin-top: 20px;">
		<div class="col-md-offset-1 col-md-7">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h1>
						UART Tutorial <small>CoActionOS Tutorial</small>
					</h1>
				</div>
				<div class="panel-body">
					<p>A UART is used to transmit data serially. CoActionOS Applib makes 
configuring and using a <a href="/coactionos-applib/html/class_uart.html">UART</a> on 
CoActionOS both simple and flexible.</p>

<p>The basic steps to use the UART are to:</p>

<ol>
  <li>Open the UART (power it on)</li>
  <li>Set the attributes (baud rate, pins, etc)</li>
  <li>Read and Write data</li>
  <li>Optionally Close the UART (power it down)</li>
</ol>

<p>The following program demonstrates how to use the UART. The program assumes 
the TXD line is connected to the RXD line. For more details on using the UART, 
please see the <a href="/coactionos-applib/html/class_uart.html">UART Applib documentation</a>.</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include &lt;cstdio&gt; </span><span class="c1">//For printf</span>
<span class="cp">#include &lt;cstdlib&gt;</span>
<span class="cp">#include &lt;cstring&gt; </span><span class="c1">//for strcpy and memset</span>
<span class="cp">#include &lt;unistd.h&gt; </span><span class="c1">//for usleep</span>
<span class="cp">#include &lt;applib/Uart.hpp&gt; </span><span class="c1">//For the UART class</span>
<span class="cp">#include &lt;applib/Timer.hpp&gt; </span><span class="c1">//General purpose timer based on clock_gettime()</span>
 
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[]){</span>
  <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
  <span class="n">Uart</span> <span class="n">uart</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">//use UART port 0</span>
 
  <span class="c1">//Initialize at 115200 baud rate -- other settings use the default</span>
  <span class="n">uart</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
 
  <span class="c1">//Discard any stale data in the buffers</span>
  <span class="n">uart</span><span class="p">.</span><span class="n">flush</span><span class="p">();</span>
 
  <span class="c1">//The UART is now ready to read and write</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Write:test</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="n">uart</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
  <span class="n">Timer</span><span class="o">::</span><span class="n">wait_msec</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">//allow a little time for all bytes to be sent</span>
  <span class="n">memset</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">);</span> <span class="c1">//clear the buffer</span>
  <span class="n">uart</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">16</span><span class="p">);</span> <span class="c1">//blocks until at least one byte is received</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Read:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">buffer</span><span class="p">);</span> <span class="c1">//Show the data that was read</span>
 
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

				</div>
			</div>

			
			<ul class="nav nav-pills">
				
				


  
     
    	<li><a href="/tags.html#coaction-ref">coaction <span class="badge">22</span></a></li>
     
    	<li><a href="/tags.html#tutorial-ref">tutorial <span class="badge">22</span></a></li>
     
    	<li><a href="/tags.html#serial-ref">serial <span class="badge">5</span></a></li>
     
    	<li><a href="/tags.html#uart-ref">uart <span class="badge">2</span></a></li>
    
  



			</ul>
			
			<div class="pagination">
				<center>
					 
						<a href="/coactionos%20tutorials/2013/11/03/CoActionOS-Tutorial-Files" type="button" class="btn btn-primary"
							data-toggle="tooltip" data-placement="left" title="" data-original-title="Previous Post"
							>
							<i class="fa fa-arrow-left"></i>
						</a> 
					 
					<a href="/archive.html" type="button" class="btn btn-primary"
						data-toggle="tooltip" data-placement="top" title="" data-original-title="Archives"
						>
						<i class="fa fa-archive"></i>
					</a> 
					<a href="/categories.html" type="button" class="btn btn-primary"
						data-toggle="tooltip" data-placement="top" title="" data-original-title="Categories"
					>
						<i class="fa fa-folder-open"></i>
					</a> 
					 
						<a href="/coactionos%20tutorials/2013/11/05/CoActionOS-Tutorial-Spi" type="button" class="btn btn-primary"
							data-toggle="tooltip" data-placement="right" title="" data-original-title="Next Post"
							>
							<i class="fa fa-arrow-right"></i>
						</a>
					
				</center>
			</div>
				
		</div>
		<div class="col-md-3">
		

			<h3>CoActionOS Tutorials</h3>
			<ul class="nav nav-pills nav-stacked">
				
				
				


  
    
      
      	
      	<li class='tagged coaction tutorial control threads'><a href="/coactionos%20tutorials/2013/11/11/CoActionOS-Tutorial-Motor-Control">Motor Control Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial'><a href="/coactionos%20tutorials/2013/11/10/CoActionOS-Tutorial-Thread">Thread Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial signals'><a href="/coactionos%20tutorials/2013/11/10/CoActionOS-Tutorial-Signals">Signals Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial'><a href="/coactionos%20tutorials/2013/11/09/CoActionOS-Tutorial-AIO">AIO Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial'><a href="/coactionos%20tutorials/2013/11/08/CoActionOS-Tutorial-Strings">Strings Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial control pwm'><a href="/coactionos%20tutorials/2013/11/07/CoActionOS-Tutorial-Pwm">PWM Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial serial i2c'><a href="/coactionos%20tutorials/2013/11/06/CoActionOS-Tutorial-I2C">I2C Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial serial spi'><a href="/coactionos%20tutorials/2013/11/05/CoActionOS-Tutorial-Spi">SPI Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='active tagged coaction tutorial serial uart'><a href="/coactionos%20tutorials/2013/11/04/CoActionOS-Tutorial-Uart" class="active">UART Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial'><a href="/coactionos%20tutorials/2013/11/03/CoActionOS-Tutorial-Files">Files Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial control'><a href="/coactionos%20tutorials/2013/11/02/CoActionOS-Tutorial-Pio">PIO Tutorial</a></li>
      	
      
    
  
    
      
      	
      	<li class='tagged coaction tutorial control popular'><a href="/coactionos%20tutorials/2013/11/01/CoActionOS-Tutorial-First-Project">First Project</a></li>
      	
      
    
  



			</ul>
			
			
			
			  
		</div>
	</div>

</div>



	</div>

	<footer style="background: #344555; color: #fff;">
		<div class="container">
			<div class="row" style="margin-top: 20px; margin-bottom: 20px; ">
				<div class="col-md-12">
					<p>&copy; 2016 Stratify Labs, Inc</p>
				</div>
			</div>
		</div>
	</footer>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-21543723-3', 'coactionos.com');
  ga('send', 'pageview');

</script>
 </body>
</html>

