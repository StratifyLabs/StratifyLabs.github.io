---
layout: page
title: Stratify OS Docs
---
{% include JB/setup %}
<script type="text/javascript" src="doxy-boot.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_hal.html">Hal</a></li><li class="navelem"><a class="el" href="class_hal_1_1_tmr.html">Tmr</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="class_hal_1_1_tmr-members.html">List of all members</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Hal::Tmr Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_hal_1_1_tmr.html" title="Tmr (hardware timer) Class. ">Tmr</a> (hardware timer) Class.  
 <a href="class_hal_1_1_tmr.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Hal::Tmr:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_hal_1_1_tmr__inherit__graph.svg" width="115" height="691"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class implements a hardware timer. The Timer class implements a logical timer that is based on the system clock and can be used for many timing functions.</p>
<p>The <a class="el" href="class_hal_1_1_tmr.html" title="Tmr (hardware timer) Class. ">Tmr</a> class can be used to configure a timer to count rising edges on an input capture pin or to generate waveforms on an output compare pin. It can also configure the timer to use the internal CPU clock at various frequencies.</p>
<p>For example this will start a microsecond timer (1Mhz) using an internal clock:</p>
<div class="fragment"><div class="line">Tmr tmr(0); <span class="comment">//use /dev/tmr0</span></div><div class="line">tmr.init(); <span class="comment">//the default is 1MHz clock using the CPU see init() below</span></div><div class="line">tmr.set(0); <span class="comment">//set the value to zero</span></div><div class="line">tmr.on(); <span class="comment">//turn the timer on</span></div><div class="line">Timer::wait_msec(100);</div><div class="line">printf(<span class="stringliteral">&quot;My timer value is %d\n&quot;</span>, tmr.value()); <span class="comment">//The value will be about 100,000</span></div></div><!-- fragment --><p>Here is an example using the <a class="el" href="class_hal_1_1_tmr.html" title="Tmr (hardware timer) Class. ">Tmr</a> to count external edges on input capture 0</p>
<div class="fragment"><div class="line">Tmr tmr(0);</div><div class="line">tmr.init(0, <span class="comment">//frequency is ignored in this case</span></div><div class="line">     <a class="code" href="class_hal_1_1_tmr.html#a32f3872fe162ceab2445e021c3d63cd9a6bc26358feab21840fe2d48c3e104d6d">Tmr::INPUT0</a>|<a class="code" href="class_hal_1_1_tmr.html#a32f3872fe162ceab2445e021c3d63cd9ae6bd7cfdcf1a36fef7557d597fe6a43d">Tmr::RISING</a>, <span class="comment">//use input capture channel 0 rising edges as the clock source</span></div><div class="line">     __TMR0_PINASSIGN_PORT1_26_27_28_29, <span class="comment">//This is for the LPC17xx to use P1.26 for CAP0.0 (timer0/input0)</span></div><div class="line">     0, <span class="comment">//not using output compare channels</span></div><div class="line">     0); <span class="comment">//not using input capture (other than clock source)</span></div><div class="line">tmr.on();</div><div class="line"> <span class="comment">//Tmr0 is now counting edges arriving on P1.26 (CAP0.0) for LPC17xx devices</span></div><div class="line">printf(<span class="stringliteral">&quot;Received %d edges\n&quot;</span>, tmr.value()); <span class="comment">//show the number of edges that have arrived</span></div></div><!-- fragment --><p>You can also use the output compare channels to set the top value of the timer.</p>
<div class="fragment"><div class="line">Tmr tmr(0);</div><div class="line">tmr.init(); <span class="comment">//use default settings (1MHz CPU timer)</span></div><div class="line"></div><div class="line">tmr.setaction(0,</div><div class="line">     <a class="code" href="class_hal_1_1_tmr.html#aad23d57627a26d7cddaf58c5509cdaf2a6a5910eed9b62c6a9f9891a5b78b0ff7">Tmr::RESET</a>); <span class="comment">//reset the timer to zero when the event happens</span></div><div class="line">     <span class="comment">//Now assign a value to output compare channel 0</span></div><div class="line">tmr.setoc(0, <span class="comment">//we are using output compare channel 0</span></div><div class="line">     1000000 <span class="comment">//When the count gets to 1 million (1 second at 1MHz), reset the timer</span></div><div class="line">     );</div><div class="line">tmr.on();</div></div><!-- fragment --> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="inherit_header pub_types_class_hal_1_1_phy"><td colspan="2" onclick="javascript:toggleInherit('pub_types_class_hal_1_1_phy')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="class_hal_1_1_phy.html">Hal::Phy</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac420fd0320f3c211c554fefb4a2047ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#ac420fd0320f3c211c554fefb4a2047ea">open</a> (int flags=0)</td></tr>
<tr class="memdesc:ac420fd0320f3c211c554fefb4a2047ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">See details below.  <a href="#ac420fd0320f3c211c554fefb4a2047ea">More...</a><br /></td></tr>
<tr class="separator:ac420fd0320f3c211c554fefb4a2047ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1abe59a8ebec9c60333301658b3cef0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa1abe59a8ebec9c60333301658b3cef0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#aa1abe59a8ebec9c60333301658b3cef0">attr</a> (<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structtmr__attr__t.html">tmr_attr_t</a> *attr)</td></tr>
<tr class="memdesc:aa1abe59a8ebec9c60333301658b3cef0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the TMR attributes. <br /></td></tr>
<tr class="separator:aa1abe59a8ebec9c60333301658b3cef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7314612c42db94035134ca409d48ef31"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7314612c42db94035134ca409d48ef31"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a7314612c42db94035134ca409d48ef31">setattr</a> (const <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structtmr__attr__t.html">tmr_attr_t</a> *<a class="el" href="class_hal_1_1_tmr.html#aa1abe59a8ebec9c60333301658b3cef0">attr</a>)</td></tr>
<tr class="memdesc:a7314612c42db94035134ca409d48ef31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the TMR attributes. <br /></td></tr>
<tr class="separator:a7314612c42db94035134ca409d48ef31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0030b0f171d3f73e3570ad2db30f3b14"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0030b0f171d3f73e3570ad2db30f3b14"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a0030b0f171d3f73e3570ad2db30f3b14">setaction</a> (const <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___t_m_r.html#ga97a1456a718acfeb3ee21c9645384fd4">tmr_action_t</a> *action)</td></tr>
<tr class="memdesc:a0030b0f171d3f73e3570ad2db30f3b14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the TMR action. <br /></td></tr>
<tr class="separator:a0030b0f171d3f73e3570ad2db30f3b14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded6be28d52a9295a228e923357a6816"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#aded6be28d52a9295a228e923357a6816">setaction</a> (int channel, int event, mcu_callback_t callback=0, void *context=0)</td></tr>
<tr class="memdesc:aded6be28d52a9295a228e923357a6816"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the TMR action.  <a href="#aded6be28d52a9295a228e923357a6816">More...</a><br /></td></tr>
<tr class="separator:aded6be28d52a9295a228e923357a6816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe8222f8d7e7a6c22cf56287975b9fd4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe8222f8d7e7a6c22cf56287975b9fd4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#afe8222f8d7e7a6c22cf56287975b9fd4">on</a> (void)</td></tr>
<tr class="memdesc:afe8222f8d7e7a6c22cf56287975b9fd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the TMR on (start counting) <br /></td></tr>
<tr class="separator:afe8222f8d7e7a6c22cf56287975b9fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41bad594719ca54b50843735285f06aa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a41bad594719ca54b50843735285f06aa"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a41bad594719ca54b50843735285f06aa">off</a> (void)</td></tr>
<tr class="memdesc:a41bad594719ca54b50843735285f06aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn the TMR off (stop counting) <br /></td></tr>
<tr class="separator:a41bad594719ca54b50843735285f06aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76ed7f099d417fdab1a9392227b6926a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76ed7f099d417fdab1a9392227b6926a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a76ed7f099d417fdab1a9392227b6926a">setoc</a> (const <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structtmr__reqattr__t.html">tmr_reqattr_t</a> *req)</td></tr>
<tr class="memdesc:a76ed7f099d417fdab1a9392227b6926a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the output compare attributes. <br /></td></tr>
<tr class="separator:a76ed7f099d417fdab1a9392227b6926a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a095811a17c3ac58adc904f4e7cde1223"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a095811a17c3ac58adc904f4e7cde1223"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a095811a17c3ac58adc904f4e7cde1223">setoc</a> (int channel, uint32_t <a class="el" href="class_hal_1_1_tmr.html#a7c98166da32ef8b4f9c7f4992a13c7f8">value</a>)</td></tr>
<tr class="memdesc:a095811a17c3ac58adc904f4e7cde1223"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the output compare unit with given parameters. <br /></td></tr>
<tr class="separator:a095811a17c3ac58adc904f4e7cde1223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a647c371e1701abc1fb25825ca4a41663"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a647c371e1701abc1fb25825ca4a41663"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a647c371e1701abc1fb25825ca4a41663">getoc</a> (<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structtmr__reqattr__t.html">tmr_reqattr_t</a> *req)</td></tr>
<tr class="memdesc:a647c371e1701abc1fb25825ca4a41663"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the output compare attributes. <br /></td></tr>
<tr class="separator:a647c371e1701abc1fb25825ca4a41663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79be5c1867f0601ae053d5e46fb286d0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a79be5c1867f0601ae053d5e46fb286d0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a79be5c1867f0601ae053d5e46fb286d0">getoc</a> (int channel)</td></tr>
<tr class="memdesc:a79be5c1867f0601ae053d5e46fb286d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the output compare attributes (no error checking) <br /></td></tr>
<tr class="separator:a79be5c1867f0601ae053d5e46fb286d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2331454d864df7a454aa13e8124a39"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace2331454d864df7a454aa13e8124a39"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#ace2331454d864df7a454aa13e8124a39">setic</a> (const <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structtmr__reqattr__t.html">tmr_reqattr_t</a> *req)</td></tr>
<tr class="memdesc:ace2331454d864df7a454aa13e8124a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the input capture attributes. <br /></td></tr>
<tr class="separator:ace2331454d864df7a454aa13e8124a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae978b74dc1a49253eb9a510ac8f729"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adae978b74dc1a49253eb9a510ac8f729"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#adae978b74dc1a49253eb9a510ac8f729">setic</a> (int channel, uint32_t <a class="el" href="class_hal_1_1_tmr.html#a7c98166da32ef8b4f9c7f4992a13c7f8">value</a>)</td></tr>
<tr class="memdesc:adae978b74dc1a49253eb9a510ac8f729"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the input capture unit with given parameters. <br /></td></tr>
<tr class="separator:adae978b74dc1a49253eb9a510ac8f729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f66f61f18f471478b252e5ed31ee19"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af9f66f61f18f471478b252e5ed31ee19"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#af9f66f61f18f471478b252e5ed31ee19">getic</a> (<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/structtmr__reqattr__t.html">tmr_reqattr_t</a> *req)</td></tr>
<tr class="memdesc:af9f66f61f18f471478b252e5ed31ee19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the input capture attributes. <br /></td></tr>
<tr class="separator:af9f66f61f18f471478b252e5ed31ee19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46065bb7288aa1648de6cd2ce8269af8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46065bb7288aa1648de6cd2ce8269af8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a46065bb7288aa1648de6cd2ce8269af8">getic</a> (int channel)</td></tr>
<tr class="memdesc:a46065bb7288aa1648de6cd2ce8269af8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the input capture value (no error checking) <br /></td></tr>
<tr class="separator:a46065bb7288aa1648de6cd2ce8269af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4147c65723e6dad22265f72b27d6e7c2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4147c65723e6dad22265f72b27d6e7c2"></a>
tmr_sample_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a4147c65723e6dad22265f72b27d6e7c2">get</a> (void)</td></tr>
<tr class="memdesc:a4147c65723e6dad22265f72b27d6e7c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the value of the TMR. <br /></td></tr>
<tr class="separator:a4147c65723e6dad22265f72b27d6e7c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c98166da32ef8b4f9c7f4992a13c7f8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c98166da32ef8b4f9c7f4992a13c7f8"></a>
tmr_sample_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a7c98166da32ef8b4f9c7f4992a13c7f8">value</a> (void)</td></tr>
<tr class="memdesc:a7c98166da32ef8b4f9c7f4992a13c7f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the value of the TMR. <br /></td></tr>
<tr class="separator:a7c98166da32ef8b4f9c7f4992a13c7f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f9b937ca3e9d8a8209798084636be9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72f9b937ca3e9d8a8209798084636be9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a72f9b937ca3e9d8a8209798084636be9">set</a> (tmr_sample_t <a class="el" href="class_hal_1_1_tmr.html#a7c98166da32ef8b4f9c7f4992a13c7f8">value</a>)</td></tr>
<tr class="memdesc:a72f9b937ca3e9d8a8209798084636be9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of the TMR. <br /></td></tr>
<tr class="separator:a72f9b937ca3e9d8a8209798084636be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fd1587e76cdd417e815383d23dea7ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a8fd1587e76cdd417e815383d23dea7ff">setattr</a> (uint32_t <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___m_l_c_d.html#ga8b9e4c2db3e8e3037740abc6006e99c1">freq</a>, uint8_t clksrc=<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___t_m_r.html#gga752e581dd80394311e122634680ece35a6928b4e5c83b959e37e3920a09123b35">TMR_CLKSRC_CPU</a>, uint8_t pin_assign=0, uint8_t enabled_oc_chans=0, uint8_t enabled_ic_chans=0)</td></tr>
<tr class="memdesc:a8fd1587e76cdd417e815383d23dea7ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the TMR attributes using specified values.  <a href="#a8fd1587e76cdd417e815383d23dea7ff">More...</a><br /></td></tr>
<tr class="separator:a8fd1587e76cdd417e815383d23dea7ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19979b7aae0c81fbc2c19db42aca4bfc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_tmr.html#a19979b7aae0c81fbc2c19db42aca4bfc">init</a> (uint32_t <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___m_l_c_d.html#ga8b9e4c2db3e8e3037740abc6006e99c1">freq</a>=1000000, uint8_t clksrc=<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___t_m_r.html#gga752e581dd80394311e122634680ece35a6928b4e5c83b959e37e3920a09123b35">TMR_CLKSRC_CPU</a>, uint8_t pin_assign=0, uint8_t enabled_oc_chans=0, uint8_t enabled_ic_chans=0)</td></tr>
<tr class="memdesc:a19979b7aae0c81fbc2c19db42aca4bfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open TMR and set attributes as specified.  <a href="#a19979b7aae0c81fbc2c19db42aca4bfc">More...</a><br /></td></tr>
<tr class="separator:a19979b7aae0c81fbc2c19db42aca4bfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_hal_1_1_periph"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_hal_1_1_periph')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_hal_1_1_periph.html">Hal::Periph</a></td></tr>
<tr class="memitem:af984bc7d757ba96c0348062a2cd983f3 inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af984bc7d757ba96c0348062a2cd983f3"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#af984bc7d757ba96c0348062a2cd983f3">read</a> (void *buf, int nbyte)</td></tr>
<tr class="memdesc:af984bc7d757ba96c0348062a2cd983f3 inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads the device. <br /></td></tr>
<tr class="separator:af984bc7d757ba96c0348062a2cd983f3 inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a817ebd5d98e31ac9ee27574e27bc4418 inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a817ebd5d98e31ac9ee27574e27bc4418"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#a817ebd5d98e31ac9ee27574e27bc4418">read</a> (int loc, void *buf, int nbyte)</td></tr>
<tr class="memdesc:a817ebd5d98e31ac9ee27574e27bc4418 inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads the device at the location <br /></td></tr>
<tr class="separator:a817ebd5d98e31ac9ee27574e27bc4418 inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91898feb89968081a5d8c203f5647ed6 inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a91898feb89968081a5d8c203f5647ed6"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#a91898feb89968081a5d8c203f5647ed6">write</a> (int loc, const void *buf, int nbyte)</td></tr>
<tr class="memdesc:a91898feb89968081a5d8c203f5647ed6 inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">write the device at the location <br /></td></tr>
<tr class="separator:a91898feb89968081a5d8c203f5647ed6 inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77439a03012cdcbeb9934e17ea530818 inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a77439a03012cdcbeb9934e17ea530818"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#a77439a03012cdcbeb9934e17ea530818">readline</a> (char *buf, int nbyte, int timeout=10, char term= '\n')</td></tr>
<tr class="memdesc:a77439a03012cdcbeb9934e17ea530818 inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads a line from the device <br /></td></tr>
<tr class="separator:a77439a03012cdcbeb9934e17ea530818 inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1790d22fa7a876eda53828691a01e28 inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae1790d22fa7a876eda53828691a01e28"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#ae1790d22fa7a876eda53828691a01e28">write</a> (const void *buf, int nbyte)</td></tr>
<tr class="memdesc:ae1790d22fa7a876eda53828691a01e28 inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">writes to the character device <br /></td></tr>
<tr class="separator:ae1790d22fa7a876eda53828691a01e28 inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c924f02938888935ac8952d6b96ec8b inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#a8c924f02938888935ac8952d6b96ec8b">close</a> ()</td></tr>
<tr class="memdesc:a8c924f02938888935ac8952d6b96ec8b inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">See details below.  <a href="#a8c924f02938888935ac8952d6b96ec8b">More...</a><br /></td></tr>
<tr class="separator:a8c924f02938888935ac8952d6b96ec8b inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3794a604e104cd9983f676a934f7663 inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af3794a604e104cd9983f676a934f7663"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#af3794a604e104cd9983f676a934f7663">read</a> (<a class="el" href="class_sys_1_1_aio.html">Sys::Aio</a> &amp;aio)</td></tr>
<tr class="memdesc:af3794a604e104cd9983f676a934f7663 inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronous read. <br /></td></tr>
<tr class="separator:af3794a604e104cd9983f676a934f7663 inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc0b6d8c2c6ff864865b637c7cf75b2 inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aacc0b6d8c2c6ff864865b637c7cf75b2"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#aacc0b6d8c2c6ff864865b637c7cf75b2">write</a> (<a class="el" href="class_sys_1_1_aio.html">Sys::Aio</a> &amp;aio)</td></tr>
<tr class="memdesc:aacc0b6d8c2c6ff864865b637c7cf75b2 inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronous write. <br /></td></tr>
<tr class="separator:aacc0b6d8c2c6ff864865b637c7cf75b2 inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b1bda330bd63c77dac8284032706dd inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a95b1bda330bd63c77dac8284032706dd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#a95b1bda330bd63c77dac8284032706dd">fileno</a> (void)</td></tr>
<tr class="memdesc:a95b1bda330bd63c77dac8284032706dd inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the file descriptor for the peripheral. <br /></td></tr>
<tr class="separator:a95b1bda330bd63c77dac8284032706dd inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a262402e1cbc3aedd7d5bb050a531c7ca inherit pub_methods_class_hal_1_1_periph"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a262402e1cbc3aedd7d5bb050a531c7ca"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hal_1_1_periph.html#a262402e1cbc3aedd7d5bb050a531c7ca">ioctl</a> (int req, void *arg)</td></tr>
<tr class="memdesc:a262402e1cbc3aedd7d5bb050a531c7ca inherit pub_methods_class_hal_1_1_periph"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the file descriptor for the peripheral. <br /></td></tr>
<tr class="separator:a262402e1cbc3aedd7d5bb050a531c7ca inherit pub_methods_class_hal_1_1_periph"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="aad23d57627a26d7cddaf58c5509cdaf2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This lists the values for the event when using <a class="el" href="class_hal_1_1_tmr.html#a0030b0f171d3f73e3570ad2db30f3b14" title="Set the TMR action. ">setaction()</a>. The values can be Or'd (|) together such as <a class="el" href="class_hal_1_1_tmr.html#aad23d57627a26d7cddaf58c5509cdaf2a6a5910eed9b62c6a9f9891a5b78b0ff7">Tmr::RESET</a>|Tmr::INTERRUPT. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="aad23d57627a26d7cddaf58c5509cdaf2a140ef26fde22fa526457bdaa79bd11be"></a>INTERRUPT&#160;</td><td class="fielddoc">
<p>Trigger interrupt and execute callback </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aad23d57627a26d7cddaf58c5509cdaf2a6a5910eed9b62c6a9f9891a5b78b0ff7"></a>RESET&#160;</td><td class="fielddoc">
<p>Reset timer value to zero </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aad23d57627a26d7cddaf58c5509cdaf2a653abd6e443f9fe40b21bca8d0794896"></a>STOP&#160;</td><td class="fielddoc">
<p>Stop the timer </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aad23d57627a26d7cddaf58c5509cdaf2ac6bcec69b7a025025eb6c4693c4d7e23"></a>SETOC&#160;</td><td class="fielddoc">
<p>Set the output compare pin high </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aad23d57627a26d7cddaf58c5509cdaf2ada5e9fe9792e5ceb4949b0e93823df73"></a>CLROC&#160;</td><td class="fielddoc">
<p>Clear the output compare pin </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aad23d57627a26d7cddaf58c5509cdaf2a8084edaf9a979cceec2103d3e8ac530c"></a>TOGGLEOC&#160;</td><td class="fielddoc">
<p>Toggle the output compare pin </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a list of the timer clock sources. Not all clock sources are available on all devices. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9aa618f926277a71de972a3ab4bb5f32ec"></a>CPU&#160;</td><td class="fielddoc">
<p>Use the internal CPU clock </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9a6bc26358feab21840fe2d48c3e104d6d"></a>INPUT0&#160;</td><td class="fielddoc">
<p>Use input 0 (device specific) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9aabf83d11ec826196b71f35b621e6bed7"></a>INPUT1&#160;</td><td class="fielddoc">
<p>Use input 1 (device specific) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9a128778c65fe9bd2ccbf715c382ea70e0"></a>INPUT2&#160;</td><td class="fielddoc">
<p>Use input 2 (device specific) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9a027cd2140ad5477e9955dd021519adf9"></a>INPUT3&#160;</td><td class="fielddoc">
<p>Use input 3 (device specific) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9ae6bd7cfdcf1a36fef7557d597fe6a43d"></a>RISING&#160;</td><td class="fielddoc">
<p>Modifier to clock on rising edges </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9a40f2e66034a1f46c0e7be2ac99a7a36d"></a>FALLING&#160;</td><td class="fielddoc">
<p>Modifier to clock on falling edges </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9afe98a6bd521428889c7328c0a032a543"></a>BOTH&#160;</td><td class="fielddoc">
<p>Modifier to clock on both rising and falling edges </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a32f3872fe162ceab2445e021c3d63cd9a70b7ad7b404b6fd28c9da9d984cda9fd"></a>COUNTDOWN&#160;</td><td class="fielddoc">
<p>Modifier for a countdown timer </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a19979b7aae0c81fbc2c19db42aca4bfc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Hal::Tmr::init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>freq</em> = <code>1000000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clksrc</em> = <code><a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___t_m_r.html#gga752e581dd80394311e122634680ece35a6928b4e5c83b959e37e3920a09123b35">TMR_CLKSRC_CPU</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin_assign</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>enabled_oc_chans</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>enabled_ic_chans</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This opens and sets the timer attributes </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">freq</td><td>timer frequency (if using TMR_CLKSRC_CPU) </td></tr>
    <tr><td class="paramname">clksrc</td><td>clock source for the timer (default is <a class="el" href="class_hal_1_1_tmr.html#a32f3872fe162ceab2445e021c3d63cd9aa618f926277a71de972a3ab4bb5f32ec">Tmr::CPU</a>) </td></tr>
    <tr><td class="paramname">pin_assign</td><td>The pin assignment if using input capture (including clock source) or output compare pins </td></tr>
    <tr><td class="paramname">enabled_oc_chans</td><td>Mask of the enabled output compare channels (only if external pins are used) </td></tr>
    <tr><td class="paramname">enabled_ic_chans</td><td>Mask of the enabled input capture channels (only if external pins are used&ndash;not including clock source) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac420fd0320f3c211c554fefb4a2047ea"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Hal::Tmr::open </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method opens the peripheral. For each instance, the peripheral only needs to be opened one time. The port is typically opened with <a class="el" href="class_hal_1_1_tmr.html#ac420fd0320f3c211c554fefb4a2047ea" title="See details below. ">open()</a> and configured with <a class="el" href="class_hal_1_1_tmr.html#a7314612c42db94035134ca409d48ef31" title="Set the TMR attributes. ">setattr()</a>. After that, other instances of the peripheral can read and write without opening again. </p>

<p>Reimplemented from <a class="el" href="class_hal_1_1_periph.html#aba2031de6b193c4f8786235b927fd391">Hal::Periph</a>.</p>

</div>
</div>
<a class="anchor" id="aded6be28d52a9295a228e923357a6816"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Hal::Tmr::setaction </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mcu_callback_t&#160;</td>
          <td class="paramname"><em>callback</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel to use </td></tr>
    <tr><td class="paramname">event</td><td>The event such as <a class="el" href="class_hal_1_1_tmr.html#aad23d57627a26d7cddaf58c5509cdaf2a140ef26fde22fa526457bdaa79bd11be">Tmr::INTERRUPT</a> </td></tr>
    <tr><td class="paramname">callback</td><td>Callback executed if <a class="el" href="class_hal_1_1_tmr.html#aad23d57627a26d7cddaf58c5509cdaf2a140ef26fde22fa526457bdaa79bd11be">Tmr::INTERRUPT</a> is used </td></tr>
    <tr><td class="paramname">context</td><td>First argument passed to callback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8fd1587e76cdd417e815383d23dea7ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Hal::Tmr::setattr </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clksrc</em> = <code><a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___t_m_r.html#gga752e581dd80394311e122634680ece35a6928b4e5c83b959e37e3920a09123b35">TMR_CLKSRC_CPU</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin_assign</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>enabled_oc_chans</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>enabled_ic_chans</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>See <a class="el" href="class_hal_1_1_tmr.html#a19979b7aae0c81fbc2c19db42aca4bfc" title="Open TMR and set attributes as specified. ">init()</a> for details. </p>

</div>
</div>
</div><!-- contents -->
